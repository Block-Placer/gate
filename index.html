<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gate Access</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; background: #f7f7f7; text-align: center; padding-top: 100px; }
    input, button { font-family: inherit; padding: 10px; font-size: 16px; margin: 5px; }
    #status { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>🚪 Gate Verification</h1>
  <p>Enter your verification code:</p>
  <input id="code" type="text" placeholder="Enter code">
  <button onclick="openGate()">Open Gate</button>
  <div id="status"></div>

  <script>
    const ws = new WebSocket("wss://gate123.loca.lt"); // change this to your lt url

    ws.onopen = () => document.getElementById("status").innerText = "Connected ✅";
    ws.onclose = () => document.getElementById("status").innerText = "Disconnected ❌";
    ws.onerror = () => document.getElementById("status").innerText = "Connection error ⚠️";

    async function openGate() {
      const code = document.getElementById("code").value;
      if (!code) return alert("Please enter a code");
      ws.send(JSON.stringify({ type: "verify", code }));

      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        if (data.status === "success") {
          document.getElementById("status").innerText = "✅ Gate opened!";
        } else {
          document.getElementById("status").innerText = "❌ Incorrect code";
        }
      };
    }
  </script>
</body>
</html>
